[databases]
keycast = host=postgres port=5432 dbname=keycast

[pgbouncer]
listen_addr = 0.0.0.0
listen_port = 5432
auth_type = plain
auth_file = /etc/pgbouncer/userlist.txt

; Pool mode - transaction mode like Cloud SQL
pool_mode = transaction

; Connection limits for scale testing
max_client_conn = 5000
default_pool_size = 200
min_pool_size = 50
reserve_pool_size = 50
reserve_pool_timeout = 5

; Prepared statement support (PgBouncer 1.21.0+)
max_prepared_statements = 200

; Timeouts
server_connect_timeout = 15
server_idle_timeout = 60
server_lifetime = 3600
client_idle_timeout = 0
client_login_timeout = 60

; Minimal logging for performance
log_connections = 0
log_disconnections = 0
log_pooler_errors = 1
stats_period = 60

; Required for sqlx
ignore_startup_parameters = extra_float_digits

; Admin access
admin_users = postgres
